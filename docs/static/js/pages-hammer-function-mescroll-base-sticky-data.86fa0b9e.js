(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-hammer-function-mescroll-base-sticky-data"],{"024d":function(t,e,n){"use strict";var i=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("f05e")),s=i(n("efb5")),o=i(n("b0a8")),l=i(n("8898")),c={components:{MescrollUni:a.default,TabsSticky:s.default,PdList:o.default},data:function(){return{mescroll:null,upOption:{onScroll:!0},tabs:[{name:"全部",pdList:null,num:1,y:0,curPageLen:0,hasNext:!0},{name:"母婴",pdList:null,num:1,y:0,curPageLen:0,hasNext:!0},{name:"图书",pdList:null,num:1,y:0,curPageLen:0,hasNext:!0}],tabIndex:0,preIndex:0,navTop:null,isShowSticky:!1}},computed:{pdList:function(){return this.tabs[this.tabIndex].pdList}},methods:{mescrollInit:function(t){this.mescroll=t},downCallback:function(t){t.resetUpScroll()},upCallback:function(t){var e=this;this.isChangeTab&&(t.hideUpScroll(),uni.showLoading()),this.getListDataFromNet(t.num,t.size,(function(n){console.log("mescroll.num="+t.num+", mescroll.size="+t.size+", curPageData.length="+n.length);var i=e.tabs[e.tabIndex];1==t.num&&(i.pdList=[]),i.pdList=i.pdList.concat(n),e.$nextTick((function(){t.endSuccess(n.length),i.num=t.num,i.curPageLen=n.length,i.hasNext=t.optUp.hasNext,e.navTop||e.setNavTop(),e.isChangeTab&&(e.isChangeTab=!1,uni.hideLoading(),e.isShowSticky&&t.scrollTo(e.navTop,0))}))}),(function(){t.endErr()}))},setNavTop:function(){var t=this,e=uni.createSelectorQuery().in(this).select("#tabInList");e.boundingClientRect((function(e){console.log("tabInList基本信息 = "+JSON.stringify(e)),t.navTop=e.top})).exec()},scroll:function(t){console.log("滚动条位置 = "+t.getScrollTop()+", navTop = "+this.navTop),t.getScrollTop()>=this.navTop?this.isShowSticky=!0:this.isShowSticky=!1},topClick:function(){this.isShowSticky=!1},changeTab:function(t){var e=this,n=this.tabs[this.preIndex];n.y=this.mescroll.getScrollTop(),this.preIndex=t;var i=this.tabs[t];i.pdList?(this.mescroll.setPageNum(i.num+1),this.mescroll.endSuccess(i.curPageLen,i.hasNext),this.$nextTick((function(){e.mescroll.scrollTo(i.y,0)}))):(this.isChangeTab=!0,this.mescroll.resetUpScroll())},getListDataFromNet:function(t,e,n,i){var a=this;setTimeout((function(){try{var s=[];if(0===a.tabIndex)for(var o=(t-1)*e;o<t*e;o++){if(o===l.default.length)break;s.push(l.default[o])}else if(1===a.tabIndex)for(var c=0;c<l.default.length;c++)-1!==l.default[c].pdName.indexOf("婴")&&s.push(l.default[c]);else if(2===a.tabIndex)for(var u=0;u<l.default.length;u++)-1!==l.default[u].pdName.indexOf("图书")&&s.push(l.default[u]);n&&n(s)}catch(r){i&&i()}}),1e3)}}};e.default=c},"0974":function(t,e,n){"use strict";var i=n("f824"),a=n.n(i);a.a},"4c94":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[t.isShowSticky?n("tabs-sticky",{attrs:{fixed:!0,tabs:t.tabs},on:{change:function(e){e=t.$handleEvent(e),t.changeTab(e)}},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}}):t._e(),n("mescroll-uni",{attrs:{up:t.upOption},on:{down:function(e){e=t.$handleEvent(e),t.downCallback(e)},up:function(e){e=t.$handleEvent(e),t.upCallback(e)},scroll:function(e){e=t.$handleEvent(e),t.scroll(e)},init:function(e){e=t.$handleEvent(e),t.mescrollInit(e)},topclick:function(e){e=t.$handleEvent(e),t.topClick(e)}}},[n("v-uni-swiper",{attrs:{autoplay:"true",interval:"3000",duration:"300",circular:"true"}},[n("v-uni-swiper-item",[n("v-uni-image",{staticStyle:{width:"100%"},attrs:{src:"http://www.mescroll.com/img/swiper1.jpg",mode:"widthFix"}})],1),n("v-uni-swiper-item",[n("v-uni-image",{staticStyle:{width:"100%"},attrs:{src:"http://www.mescroll.com/img/swiper2.jpg",mode:"widthFix"}})],1)],1),n("v-uni-view",{staticClass:"demo-tip"},[t._v("列表只初始化一次,切换菜单缓存数据")]),n("v-uni-view",{attrs:{id:"tabInList"}},[n("tabs-sticky",{attrs:{tabs:t.tabs},on:{change:function(e){e=t.$handleEvent(e),t.changeTab(e)}},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}})],1),n("pd-list",{attrs:{list:t.pdList}})],1)],1)},a=[];n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}))},"5aea":function(t,e,n){"use strict";n.r(e);var i=n("4c94"),a=n("623e");for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("0974");var o=n("2877"),l=Object(o["a"])(a["default"],i["a"],i["b"],!1,null,"507010d3",null);e["default"]=l.exports},"623e":function(t,e,n){"use strict";n.r(e);var i=n("024d"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=a.a},"7ad2":function(t,e,n){e=t.exports=n("24fb")(!1),e.push([t.i,".demo-tip[data-v-507010d3]{padding:%?18?%;font-size:%?28?%;font-weight:700;text-align:center;background:#cfe0da}",""])},f824:function(t,e,n){var i=n("7ad2");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("3ddd9728",i,!0,{sourceMap:!1,shadowMode:!1})}}]);