(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-hammer-canvas-canvas-particle"],{"1b85":function(t,a,s){"use strict";var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("v-uni-view",[s("v-uni-canvas",{staticStyle:{width:"100vw",height:"100vh"},attrs:{type:"2d","canvas-id":"particle",id:"particle"}})],1)},n=[];s.d(a,"a",(function(){return i})),s.d(a,"b",(function(){return n}))},"38e1":function(t,a,s){"use strict";s.r(a);var i=s("76ce"),n=s.n(i);for(var r in i)"default"!==r&&function(t){s.d(a,t,(function(){return i[t]}))}(r);a["default"]=n.a},"76ce":function(t,a,s){"use strict";function i(t,a,s,i){var n,r;t-=i.camX,a-=i.camY-8,s-=i.camZ,n=Math.atan2(t,s),r=Math.sqrt(t*t+s*s),t=Math.sin(n-i.yaw)*r,s=Math.cos(n-i.yaw)*r,n=Math.atan2(a,s),r=Math.sqrt(a*a+s*s),a=Math.sin(n-i.pitch)*r,s=Math.cos(n-i.pitch)*r;var o=-1e3,e=1,c=1e3,h=1,v=0,f=0,u=t,l=s,d=(l-f)*(c-o)-(u-v)*(h-e),p=((u-v)*(e-f)-(l-f)*(o-v))/d,m=((c-o)*(e-f)-(h-e)*(o-v))/d;return s||(s=1e-9),p>0&&p<1&&m>0&&m<1?{x:i.cx+(o+p*(c-o))*i.scale,y:i.cy+a/s*i.scale,d:t*t+a*a+s*s}:{d:-1}}function n(t,a,s){var i=Math.sqrt(t*t+a*a+s*s);return i&&s/i>=-1&&s/i<=1?Math.acos(s/i):1e-8}function r(t){t+=1e-6;var a=parseInt(16*(.5+.5*Math.sin(t))),s=parseInt(16*(.5+.5*Math.cos(t))),i=parseInt(16*(.5-.5*Math.sin(t)));return"#"+a.toString(16)+s.toString(16)+i.toString(16)}function o(t,a,s){var i=s,n=1-i;return[n*t[0]+i*a[0],n*t[1]+i*a[1],n*t[2]+i*a[2]]}function e(t){t+=1e-6;var a=parseInt(256*(.5+.5*Math.sin(t))),s=parseInt(256*(.5+.5*Math.cos(t))),i=parseInt(256*(.5-.5*Math.sin(t)));return[a,s,i]}function c(t){var a=parseInt(t[0]),s=parseInt(t[1]),i=parseInt(t[2]);return"#"+("0"+a.toString(16)).slice(-2)+("0"+s.toString(16)).slice(-2)+("0"+i.toString(16)).slice(-2)}function h(t,a){return a.dist-t.dist}function v(t){var a,s,i={};a=2*Math.PI*Math.random(),s=Math.sqrt(Math.random()*t.distributionRadius),i.x=Math.sin(a)*s,i.y=-t.vortexHeight/2,i.vy=t.initV/20+Math.random()*t.initV,i.z=Math.cos(a)*s,i.radius=200+800*Math.random(),i.color=i.radius/1e3+t.frameNo/250,t.points.push(i)}function f(t){for(var a,s,n,r,h,v,f=-25;f<=25;f+=1)for(var u=-25;u<=25;u+=1)if(a=2*f,n=2*u,s=t.floor,r=Math.sqrt(a*a+n*n),h=i(a,s-r*r/85,n,t),-1!=h.d){var l=1+15e3/(1+h.d);v=.15-.15*Math.pow(r/50,4),v>0&&(t.ctx.fillStyle=c(o(e(r/26-t.frameNo/40),[0,128,32],.5+Math.sin(r/6-t.frameNo/8)/2)),t.ctx.globalAlpha=v,t.ctx.fillRect(h.x-l/2,h.y-l/2,l,l))}t.ctx.fillStyle="#82f";for(f=-25;f<=25;f+=1)for(u=-25;u<=25;u+=1)a=2*f,n=2*u,s=-t.floor,r=Math.sqrt(a*a+n*n),h=i(a,s+r*r/85,n,t),-1!=h.d&&(l=1+15e3/(1+h.d),v=.15-.15*Math.pow(r/50,4),v>0&&(t.ctx.fillStyle=c(o(e(-r/26-t.frameNo/40),[32,0,128],.5+Math.sin(-r/6-t.frameNo/8)/2)),t.ctx.globalAlpha=v,t.ctx.fillRect(h.x-l/2,h.y-l/2,l,l)))}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s("55dd"),s("6b54");var u={data:function(){return{systemInfo:{},vars:{},stop:null}},onLoad:function(){var t=this;uni.getSystemInfo({success:function(a){t.systemInfo=a,console.log(a)}})},onReady:function(){this.setup()},onUnload:function(){clearTimeout(this.stop)},methods:{setup:function(){this.vars.canvas=document.querySelector("#particle canvas"),this.vars.ctx=this.vars.canvas.getContext("2d");var t=uni.getSystemInfoSync().pixelRatio;this.vars.canvas.width=this.systemInfo.windowWidth*t,this.vars.canvas.height=this.systemInfo.windowHeight*t,this.vars.ctx=this.vars.canvas.getContext("2d"),this.vars.cx=this.systemInfo.windowWidth/2,this.vars.cy=this.systemInfo.windowHeight/2,this.vars.frameNo=0,this.vars.camX=0,this.vars.camY=0,this.vars.camZ=-14,this.vars.pitch=n(this.vars.camX,this.vars.camZ,this.vars.camY)-Math.PI/2,this.vars.yaw=0,this.vars.bounding=10,this.vars.scale=500,this.vars.floor=26.5,this.vars.points=[],this.vars.initParticles=700,this.vars.initV=.01,this.vars.distributionRadius=800,this.vars.vortexHeight=25,this.frame(this.vars)},frame:function(t){var a=this;this.vars.frameNo++,this.stop=setTimeout((function(){a.frame(a.vars)}),.06),this.process(this.vars),this.draw(this.vars)},process:function(t){if(t.points.length<t.initParticles)for(var a=0;a<5;++a)v(t);var s,i,r;s=Math.atan2(t.camX,t.camZ),i=Math.sqrt(t.camX*t.camX+t.camZ*t.camZ),i-=Math.sin(t.frameNo/80)/25,r=Math.cos(t.frameNo/300)/165,t.camX=Math.sin(s+r)*i,t.camZ=Math.cos(s+r)*i,t.camY=15*-Math.sin(t.frameNo/220),t.yaw=Math.PI+s+r,t.pitch=n(t.camX,t.camZ,t.camY)-Math.PI/2;for(a=0;a<t.points.length;++a){var o=t.points[a].x,e=(t.points[a].y,t.points[a].z),c=Math.sqrt(o*o+e*e)/1.0075,h=.1/(1+c*c/5),f=Math.atan2(o,e)+h;t.points[a].x=Math.sin(f)*c,t.points[a].z=Math.cos(f)*c,t.points[a].y+=t.points[a].vy*h*(2*(Math.sqrt(t.distributionRadius)-c)),(t.points[a].y>t.vortexHeight/2||c<.25)&&(t.points.splice(a,1),v(t))}},draw:function(t){var a,s,n,o;t.ctx.globalAlpha=.15,t.ctx.fillStyle="#000",t.ctx.fillRect(0,0,t.canvas.width,t.canvas.height),f(t);for(var e=0;e<t.points.length;++e)if(s=t.points[e].x,n=t.points[e].y,o=t.points[e].z,a=i(s,n,o,t),-1!=a.d){t.points[e].dist=a.d;var c=1+t.points[e].radius/(1+a.d),v=Math.abs(t.points[e].y),u=.8-.8*Math.pow(v/(t.vortexHeight/2),1e3);t.ctx.globalAlpha=u>=0&&u<=1?u:0,t.ctx.fillStyle=r(t.points[e].color),a.x>-1&&a.x<t.canvas.width&&a.y>-1&&a.y<t.canvas.height&&t.ctx.fillRect(a.x-c/2,a.y-c/2,c,c)}t.points.sort(h)}}};a.default=u},a5e2:function(t,a,s){"use strict";s.r(a);var i=s("1b85"),n=s("38e1");for(var r in n)"default"!==r&&function(t){s.d(a,t,(function(){return n[t]}))}(r);var o=s("2877"),e=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,null,null);a["default"]=e.exports}}]);